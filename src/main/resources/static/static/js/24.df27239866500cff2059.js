webpackJsonp([24],{"9bs4":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("gN++"),n=a("Foau"),l={name:"index",mixins:[a("Ks07").a],data:function(){return{transferData:function(t){var e=(new Date).getFullYear(),a=[],i=["xingbie","mingzu","chushengriqi","nianling","canjiagongzuoshijian","rudangshijian","zhengzhimianmao","xianrenzhiji","taozhuanzhiji","xianrenzhiwu","gongwuyuandengjishijian","junzhuanganbushoucitaozhuan","shimingzhidanlei","jiguan","jicenggongzuo","xueli",e+"niankaohe",e-1+"niankaohe",e-2+"niankaohe",e-3+"niankaohe",e-4+"niankaohe"];return["性别","民族","出生日期","年龄","参加工作时间","入党（团）时间","政治面貌","现任职级","套转职级","现任职务","公务员登记时间","军转干部首次套转不占职数","实名制（单列）管理干部","籍贯","是否基层工作两年以上","学历",e+"年考核",e-1+"年考核",e-2+"年考核",e-3+"年考核",e-4+"年考核"].forEach(function(t,e){a.push({label:t,key:e,pinyin:i[e]})}),a}(),tableData:[],bloading:!1,dialogTableVisible:!1,value:[],arr:[],filterMethod:function(t,e){return e.pinyin.indexOf(t)>-1},treeData:[],unitName:"",data:[],unitId:"",unitIds:"",expandedData:[],defaultProps:{children:"children",label:"label"}}},methods:{getRowClass:function(t){t.row,t.column,t.rowIndex,t.columnIndex},beforeInit:function(){return this.url="api/data/customizeInfo",this.params={page:this.page,size:this.size,transferArr:this.arr.join(","),unitIds:this.$refs.tree.getCheckedKeys().join(",")},!0},outTableData:function(){var t=this;if(void 0==this.$refs.tree.getCheckedKeys()||""==this.$refs.tree.getCheckedKeys())this.$notify({title:"请先选择单位",type:"error",duration:2500});else if(void 0==this.arr||""==this.arr)this.$notify({title:"请先选择字段",type:"error",duration:2500});else{this.dialogTableVisible=!0;var e={transferArr:this.arr.join(","),unitIds:this.$refs.tree.getCheckedKeys().join(",")};Object(n.j)(e).then(function(e){t.tableData=e.result,t.$notify({title:"查询成功",type:"success",duration:2500}),t.init()}).catch(function(t){console.log(t.response.data.message)})}},pageChange:function(t){this.page=t-1,this.init()},sizeChange:function(t){this.page=0,this.size=t,this.init()},outData:function(){if(void 0==this.$refs.tree.getCheckedKeys()||""==this.$refs.tree.getCheckedKeys())this.$notify({title:"请先选择单位",type:"error",duration:2500});else if(void 0==this.arr||""==this.arr)this.$notify({title:"请先选择字段",type:"error",duration:2500});else{this.bloading=!0;var t={transferArr:this.arr.join(","),unitIds:this.$refs.tree.getCheckedKeys().join(",")},e=this.$refs.tree.getCheckedNodes()[0].label+"_自定义信息表导出.xls",a=this;this.$axios({method:"post",url:"http://152.136.134.221:8085/api/data/customize",params:t,contentType:"application/x-www-form-urlencoded",responseType:"blob"}).then(function(t){console.log(t);var i=document.createElement("a"),n=new Blob([t.data],{type:"application/vnd.ms-excel"});i.style.display="none",i.href=URL.createObjectURL(n),i.setAttribute("download",e),document.body.appendChild(i),i.click(),document.body.removeChild(i),a.bloading=!1}).catch(function(t){console.log(t)})}},handleChange:function(t,e,a){console.log(t,e,a),this.arr=[];for(var i=0;i<this.value.length;i++)console.log(this.value[i]+","+this.transferData[this.value[i]].label),"right"===e&&this.arr.push(this.transferData[this.value[i]].label),"left"===e&&this.arr.push(this.transferData[this.value[i]].label)},getUnitDatas:function(){var t=this,e={name:this.unitName};Object(i.l)(e).then(function(e){t.treeData=e.result,t.unitId=e.result[0].id})},handleNodeClick:function(t){0===t.id?this.unitId=null:this.unitId=t.id,this.expandedData=[t.id]}},created:function(){this.getUnitDatas()}},s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{"text-align":"center",width:"100%",height:"100%"}},[a("div",{staticStyle:{width:"20%",float:"left"}},[a("fieldset",[t._m(0),t._v(" "),a("div",{staticClass:"head-container",staticStyle:{"padding-top":"10px"}},[a("el-input",{staticClass:"filter-item",staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"输入单位名称搜索","prefix-icon":"el-icon-search"},on:{input:t.getUnitDatas},model:{value:t.unitName,callback:function(e){t.unitName=e},expression:"unitName"}})],1),t._v(" "),a("el-tree",{ref:"tree",attrs:{data:t.treeData,"show-checkbox":"","node-key":"id","highlight-current":!0,"expand-on-click-node":!1,"default-expanded-keys":t.expandedData,"default-expand-all":"",props:t.defaultProps},on:{"node-click":t.handleNodeClick}})],1)]),t._v(" "),a("div",{staticStyle:{width:"78%",float:"left"}},[a("fieldset",[t._m(1),t._v(" "),a("el-transfer",{staticStyle:{"text-align":"left","margin-bottom":"5px"},attrs:{filterable:"","filter-method":t.filterMethod,"filter-placeholder":"请输入字段拼音","left-default-checked":[0,1,2],titles:["资源列表","导出字段"],"button-texts":["移除","新增"],data:t.transferData},on:{change:t.handleChange},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},[a("el-button",{staticClass:"transfer-footer",attrs:{slot:"right-footer",type:"success",size:"small"},on:{click:function(e){return t.outTableData()}},slot:"right-footer"},[t._v("报表")]),t._v(" "),a("el-button",{staticClass:"transfer-footer",attrs:{slot:"right-footer",type:"success",size:"small"},on:{click:function(e){return t.outData()}},slot:"right-footer"},[t._v("导出")])],1)],1),t._v(" "),a("el-dialog",{staticStyle:{"margin-left":"0px"},attrs:{title:"报表查询",visible:t.dialogTableVisible,"append-to-body":"",width:"90%"},on:{"update:visible":function(e){t.dialogTableVisible=e}}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"loading-area",staticStyle:{width:"97%","margin-right":"5px"},attrs:{data:t.data,size:"small","cell-style":{padding:"0px"},"element-loading-spinner":"el-icon-loading","row-style":t.getRowClass,"header-row-style":t.getRowClass,"header-cell-style":{"text-align":"center",background:"#ADD8E6",color:"#030303"},"element-loading-text":"请稍后","row-key":"id","highlight-current-row":""}},[a("el-table-column",{attrs:{type:"index",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{prop:"unitName",label:"单位名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"姓名"}}),t._v(" "),a("el-table-column",{attrs:{prop:"states",label:"转态"}}),t._v(" "),t._l(t.tableData,function(t,e){return a("el-table-column",{key:e,attrs:{prop:t.prop,label:t.label}})})],2),t._v(" "),a("el-pagination",{staticStyle:{"margin-top":"2px",float:"right"},attrs:{total:t.total,"current-page":t.page+1,layout:"total, prev, pager, next, jumper, sizes"},on:{"size-change":t.sizeChange,"current-change":t.pageChange}}),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"text"},on:{click:function(e){t.dialogTableVisible=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{staticClass:"transfer-footer",attrs:{slot:"right-footer",type:"success",size:"small",loading:t.bloading},on:{click:function(e){return t.outData()}},slot:"right-footer"},[t._v("导出")])],1)],1)],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("legend",{staticStyle:{"text-align":"center"}},[e("span",{staticStyle:{color:"#000000"}},[this._v("单位选择")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("legend",{staticStyle:{"text-align":"center"}},[e("span",{staticStyle:{color:"#000000"}},[this._v("报表字段筛选")])])}]};var o=a("VU/8")(l,s,!1,function(t){a("U94e")},"data-v-1594bb1e",null);e.default=o.exports},U94e:function(t,e){}});