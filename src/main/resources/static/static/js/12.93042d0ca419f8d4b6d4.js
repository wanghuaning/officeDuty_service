webpackJsonp([12],{"buC+":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("Ks07"),i=a("R2SV"),n=a("vLgD");function r(e){return Object(n.a)({url:"/api/pushRecordDetails",method:"get",params:e})}var o={components:{treeTable:a("s3ol").a},mixins:[l.a],data:function(){return{dialog:!1,loading:!1,expand:!0,recordTypeOptions:[{key:"推送",display_name:"数据推送监控"},{key:"获取",display_name:"数据接收监控"}],formInline:{dataType:"",batchNum:""},searchLoading:!1,columns:[{text:"序号",value:"id"}],formInline_detail:{},data_Detail:[],detail_total:0,detail_page:0,dataTable_detail:"",dataType_detail:"",batchNum_detail:""}},created:function(){var e=this;this.$nextTick(function(){e.init()})},methods:{beforeInit:function(){return this.url="api/pushRecordsPage",this.params={size:this.size,page:this.page+1,dataType:this.formInline.dataType,batchNum:this.formInline.batchNum},!0},getTable:function(){var e=this,t={size:this.size,page:1,dataType:this.formInline.dataType,batchNum:this.formInline.batchNum};this.loading=!0,function(e){return Object(n.a)({url:"/api/pushRecordsPage",method:"get",params:e})}(t).then(function(t){e.data=t.result.list,e.total=t.result.pager.recordCount,e.loading=!1})},resetForm:function(e){var t=this;this.$nextTick(function(){t.$refs[e].resetFields()})},formatter_end:function(e,t){return Object(i.a)(e.endDate)},formatter_upDate:function(e,t){return Object(i.a)(e.updateTime)},formatter:function(e,t){return Object(i.a)(e.projectDate)},formatter_start:function(e,t){return Object(i.a)(e.startDate)},handleClick:function(e){var t=this,a={size:this.size,page:1,dataTable:e.dataTable,dataType:e.pushReceive,batchNum:e.batchNum};this.loading=!0,this.dialog=!0,r(a).then(function(a){t.data_Detail=a.result.list,t.detail_total=a.result.pager.recordCount,t.dataTable_detail=e.dataTable,t.dataType_detail=e.pushReceive,t.batchNum_detail=e.batchNum,t.loading=!1})},detail_pageChange:function(e){var t=this;this.detail_page=e-1,this.loading=!0,r({size:this.size,page:this.detail_page+1,dataTable:this.dataTable_detail,dataType:this.dataType_detail,batchNum:this.batchNum_detail}).then(function(e){t.data_Detail=e.result.list,t.detail_total=e.result.pager.recordCount,t.loading=!1})},detail_sizeChange:function(e){this.detail_page=0,this.size=e,this.detail_pageChange()}}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container",staticStyle:{"padding-top":"10px"}},[a("div",{staticClass:"head-container",staticStyle:{"padding-bottom":"1px"}},[a("el-form",{ref:"formInline",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline,size:"small"}},[a("el-form-item",{attrs:{prop:"dataType"}},[a("el-select",{staticClass:"filter-item",staticStyle:{width:"150px"},attrs:{clearable:"",placeholder:"数据监控类型"},on:{change:e.getTable},model:{value:e.formInline.dataType,callback:function(t){e.$set(e.formInline,"dataType",t)},expression:"formInline.dataType"}},e._l(e.recordTypeOptions,function(e){return a("el-option",{key:e.key,attrs:{label:e.display_name,value:e.key}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"批次号：",prop:"batchNum"}},[a("el-input",{attrs:{placeholder:"请输入批次号"},model:{value:e.formInline.batchNum,callback:function(t){e.$set(e.formInline,"batchNum",t)},expression:"formInline.batchNum"}})],1),e._v(" "),a("el-button",{staticClass:"filter-item",attrs:{size:"small",type:"success",icon:"el-icon-search"},on:{click:e.getTable}},[e._v("查询")]),e._v(" "),a("el-button",{staticClass:"filter-item",attrs:{size:"small",type:"success",icon:"el-icon-refresh"},on:{click:function(t){return e.resetForm("formInline")}}},[e._v("重置")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":"请稍后","element-loading-spinner":"el-icon-loading",data:e.data,"expand-all":e.expand,columns:e.columns,size:"small","row-key":"id","tree-props":{children:"children",hasChildren:"hasChildren"}}},[a("el-table-column",{attrs:{prop:"dataTable",label:"信息表"}}),e._v(" "),a("el-table-column",{attrs:{prop:"pushReceive",label:"类型",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"startDate",formatter:e.formatter_start,label:"开始时间",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"endDate",formatter:e.formatter_end,label:"结束时间",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"projectDate",formatter:e.formatter,label:"项目时间",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"recordsNum",label:"记录条数",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"详情",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleClick(t.row)}}},[e._v("\n          "+e._s(t.row.batchNum)+"\n        ")])]}}])})],1),e._v(" "),a("div",{staticClass:"block1",staticStyle:{"text-align":"center","margin-top":"1px"}},[a("el-pagination",{attrs:{total:e.total,"current-page":e.page+1,layout:"total, prev, pager, next, sizes,jumper"},on:{"current-change":e.pageChange,"size-change":e.sizeChange}})],1),e._v(" "),a("el-dialog",{attrs:{visible:e.dialog,"append-to-body":"",width:"90%"},on:{"update:visible":function(t){e.dialog=t}}},[a("el-form",{ref:"formInline",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline_detail,size:"small"}},[e._v("  \n      "),a("el-form-item",{attrs:{label:"表名：",prop:"dataTable_detail"}},[e._v(e._s(e.dataTable_detail)+"\n      ")]),e._v(" "),a("el-form-item",{attrs:{label:"类型：",prop:"dataType_detail"}},[e._v(e._s(e.dataType_detail)+"\n      ")]),e._v(" "),a("el-form-item",{attrs:{label:"批次号：",prop:"batchNum_detail"}},[e._v(e._s(e.batchNum_detail)+"\n      ")])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{"element-loading-text":"请稍后","element-loading-spinner":"el-icon-loading",data:e.data_Detail,size:"small"}},[a("el-table-column",{attrs:{prop:"name",label:"名称",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"id",label:"主键",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"parentId",label:"外键",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"updateTime",formatter:e.formatter_upDate,label:"更新日期",align:"center"}})],1),e._v(" "),a("div",{staticClass:"block2",staticStyle:{"text-align":"center","margin-top":"1px"}},[a("el-pagination",{attrs:{total:e.detail_total,"current-page":e.detail_page+1,layout:"total, prev, pager, next, sizes,jumper"},on:{"current-change":e.detail_pageChange,"size-change":e.detail_sizeChange}})],1)],1)],1)},staticRenderFns:[]};var c=a("VU/8")(o,s,!1,function(e){a("tIYX")},"data-v-6434bcf0",null);t.default=c.exports},tIYX:function(e,t){}});