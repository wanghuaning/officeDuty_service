webpackJsonp([11],{Z74c:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=l("gN++"),i=l("Ks07"),o=l("R2SV"),n={mixins:[i.a],name:"index",data:function(){return{unitName:"",units:[],unitId:"",selectPeople:[],downloadLoading:!1,defaultCheckedKeys:[],loading:!1,data:[],defaultProps:{children:"children",label:"name"},enabledTypeOptions:[{key:"全部",display_name:"全部"},{key:"在职",display_name:"在职"},{key:"退休",display_name:"退休"},{key:"调出",display_name:"调出"},{key:"其他",display_name:"其他"}],query:{name:"",states:"在职"}}},created:function(){var e=this;this.$nextTick(function(){e.init(),e.getUnitDatas()})},methods:{beforeInit:function(){this.url="api/people/info";var e=this.query,t=e.name,l=e.states;return this.params={page:this.page,size:this.size,sort:"id,desc",unitId:this.unitId,name:t,states:l},!0},handleNodeClick:function(e){0===e.id?this.unitId=null:this.unitId=e.id,this.init(),this.defaultCheckedKeys=[e.id]},getUnitDatas:function(){var e=this,t={id:"ID",sort:"desc",name:this.unitName};Object(a.l)(t).then(function(t){e.units=t.result,e.unitId=t.result[0].id,"system"===t.ext.userAccount&&(e.permission=!0),"1"===t.ext.roles&&(e.message=!0)})},formatter:function(e,t,l,a){if(null!=e[t.property])return Object(o.a)(e[t.property])},downloadPeople:function(){},downloadGanBuPeople:function(){var e=[];if(void 0!==this.multipleTable&&""!=this.multipleTable){for(var t=0;t<this.multipleTable.length;t++){var l=this.multipleTable[t].id;e.push(l)}var a={unitName:this.unitName,peopleIds:e};this.outOutPeopleExcel(a)}else this.$notify({title:"请选择导出人员",type:"error",duration:25e3})},outOutPeopleExcel:function(e){this.downloadLoading=!0;var t=this;this.$axios({method:"post",url:"http://152.136.134.221:8085/api/data/exportFreePeoples",params:e,contentType:"application/x-www-form-urlencoded",responseType:"blob"}).then(function(e){console.log(e);var l=document.createElement("a"),a=new Blob([e.data],{type:"application/vnd.ms-zip"});l.style.display="none",l.href=URL.createObjectURL(a),l.setAttribute("download","公务员职级任免审批表.zip"),document.body.appendChild(l),l.click(),document.body.removeChild(l),t.downloadLoading=!1}).catch(function(e){console.log(e)})},handleSelectionChange:function(e){if(this.selectPeople=[],this.multipleTable=e,void 0!==this.multipleTable&&""!=this.multipleTable)for(var t=0;t<this.multipleTable.length;t++){var l=this.multipleTable[t].name;this.selectPeople.push(l)}console.log(e)}}},s={render:function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",[l("el-row",{staticStyle:{"margin-left":"5px"},attrs:{gutter:20}},[l("el-col",{attrs:{xs:7,sm:6,md:4,lg:4,xl:4}},[l("div",{staticClass:"head-container",staticStyle:{"padding-top":"10px"}},[l("el-input",{staticClass:"filter-item",staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"输入单位名称搜索","prefix-icon":"el-icon-search"},on:{input:e.getUnitDatas},model:{value:e.unitName,callback:function(t){e.unitName=t},expression:"unitName"}})],1),e._v(" "),l("el-tree",{ref:"tree",attrs:{data:e.units,"node-key":"id",props:e.defaultProps,"highlight-current":!0,"expand-on-click-node":!1,"default-checked-keys":e.defaultCheckedKeys,"default-expand-all":""},on:{"node-click":e.handleNodeClick},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.node;return t.data,l("span",{staticClass:"span-ellipsis"},[l("span",{attrs:{title:a.label}},[e._v(e._s(a.label))])])}}])})],1),e._v(" "),l("el-col",{staticStyle:{"border-left":"1px solid white"},attrs:{xs:17,sm:18,md:20,lg:20,xl:20}},[l("div",{staticClass:"head-container",staticStyle:{"padding-top":"10px"}},[l("el-input",{staticClass:"filter-item",staticStyle:{width:"10%"},attrs:{clearable:"",placeholder:"姓名或简名"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.toQuery(t)}},model:{value:e.query.name,callback:function(t){e.$set(e.query,"name",t)},expression:"query.name"}}),e._v(" "),l("el-select",{staticClass:"filter-item",staticStyle:{width:"10%"},attrs:{clearable:"",placeholder:"请选择人员状态"},on:{change:e.toQuery},model:{value:e.query.states,callback:function(t){e.$set(e.query,"states",t)},expression:"query.states"}},e._l(e.enabledTypeOptions,function(e){return l("el-option",{key:e.key,attrs:{label:e.display_name,value:e.key}})}),1),e._v(" "),l("el-button",{staticClass:"filter-item",attrs:{size:"mini",type:"success",icon:"el-icon-search"},on:{click:e.toQuery}},[e._v("搜索")]),e._v(" "),l("div",{staticStyle:{display:"inline-block"}},[l("el-button",{staticClass:"filter-item",attrs:{loading:e.downloadLoading,size:"mini",type:"warning",icon:"el-icon-download"},on:{click:e.downloadGanBuPeople}},[e._v("干部任免审批表")])],1),e._v(" "),l("div",{staticStyle:{display:"inline-block"}},[l("el-button",{staticClass:"filter-item",attrs:{loading:e.downloadLoading,size:"mini",type:"primary",icon:"el-icon-download"},on:{click:e.downloadPeople}},[e._v("职级任免审批表")])],1),e._v(" "),l("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%","font-size":"10px"},attrs:{"header-cell-style":{"text-align":"center",background:"#ADD8E6",color:"#030303"},"cell-style":{padding:"0px"},data:e.data,size:"small","row-key":"id","element-loading-text":"请稍后","highlight-current-row":"","element-loading-spinner":"el-icon-loading",border:""},on:{"selection-change":e.handleSelectionChange}},[l("el-table-column",{attrs:{type:"selection","reserve-selection":!0,width:"55"}}),e._v(" "),l("el-table-column",{attrs:{type:"index",label:"序号",fixed:"left",width:"60"}}),e._v(" "),l("el-table-column",{attrs:{sortable:"","show-overflow-tooltip":!0,fixed:"left",label:"姓名",prop:"name"}}),e._v(" "),l("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"idcard",width:"180px",label:"身份证号"}}),e._v(" "),l("el-table-column",{attrs:{sortable:"","show-overflow-tooltip":!0,formatter:e.formatter,width:"110px",prop:"birthday",label:"出生年月"}}),e._v(" "),l("el-table-column",{attrs:{"show-overflow-tooltip":!0,width:"50px",prop:"sex",label:"性别"}}),e._v(" "),l("el-table-column",{attrs:{"show-overflow-tooltip":!0,width:"120px",prop:"birthplace",label:"籍贯"}}),e._v(" "),l("el-table-column",{attrs:{sortable:"","show-overflow-tooltip":!0,width:"80px",prop:"nationality",label:"民族"}}),e._v(" "),l("el-table-column",{attrs:{"show-overflow-tooltip":!0,formatter:e.formatter,width:"110px",prop:"workday",label:"参加工作时间"}}),e._v(" "),l("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"states",width:"90px",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-tag",{attrs:{type:"在职"===t.row.states?"success":"warning"}},[e._v(e._s(t.row.states))])]}}])}),e._v(" "),l("el-table-column",{attrs:{sortable:"","show-overflow-tooltip":!0,prop:"party",width:"110px",label:"政治面貌"}}),e._v(" "),l("el-table-column",{attrs:{sortable:"","show-overflow-tooltip":!0,prop:"position",width:"100px",label:"职务层次"}}),e._v(" "),l("el-table-column",{attrs:{sortable:"","show-overflow-tooltip":!0,prop:"positionLevel",width:"100px",label:"现任职级"}}),e._v(" "),l("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"politicalStatus",label:"编制类型"}})],1),e._v(" "),l("el-pagination",{staticStyle:{"margin-top":"2px",float:"right"},attrs:{total:e.total,"current-page":e.page+1,layout:"total, prev, pager, next, jumper, sizes"},on:{"size-change":e.sizeChange,"current-change":e.pageChange}})],1)])],1),e._v(" "),l("div",{staticStyle:{color:"#333333","text-align":"center"}},[e._v("\n    "+e._s(this.selectPeople)+"\n  ")])],1)},staticRenderFns:[]};var r=l("VU/8")(n,s,!1,function(e){l("xM5H")},"data-v-dfd01124",null);t.default=r.exports},xM5H:function(e,t){}});