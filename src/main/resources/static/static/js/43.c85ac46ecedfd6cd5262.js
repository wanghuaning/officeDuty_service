webpackJsonp([43],{Mcp2:function(e,t){},eH3O:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Ks07"),i=a("sqWj"),l={name:"AddAssessment",mixins:[n.a],data:function(){var e=function(e){return{cellHovering:!1}};return{cellStates:{name:e,name1:e,name2:e},addDialogVisible:!1,exportLoading:!1,deleteDialogVisible:!1,dialogAddAssessmentVisible:!1,loading:!1,unitId:"",data:[],query:{name:"",year:"2019"},years:[{key:"2019",display_name:"2019"},{key:"2020",display_name:"2020"}],names:[{key:"优秀",display_name:"优秀"},{key:"称职",display_name:"称职"},{key:"基本称职",display_name:"基本称职"},{key:"不称职",display_name:"不称职"},{key:"不参加考核",display_name:"不参加考核"},{key:"不定等次",display_name:"不定等次"}],validators:{name:function(e,t){var a=e.name;t(a?"":"请选择考核结果")},name1:function(e,t){var a=e.name1;t(a?"":"请选择考核结果")},name2:function(e,t){var a=e.name2;t(a?"":"请选择考核结果")}}}},computed:{editTable:function(){return this.$refs.editTable}},methods:{beforeInit:function(){this.url="api/people/addAssessmentInfo";var e=this.query,t=e.name,a=e.year;return this.params={page:this.page,size:this.size,sort:"id,desc",unitId:this.unitId,name:t,year:a},!0},addKaoHe:function(){this.addDialogVisible=!0},addKaoHeAll:function(){var e=this,t={unitId:this.unitId,year:this.query.year};this.exportLoading=!0,Object(i.b)(t).then(function(t){e.$message.success("新增成功"),e.init()}).catch(function(t){e.loading=!1,console.log(t)}),this.addDialogVisible=!1},deleteKaoHe:function(){this.deleteDialogVisible=!0},deleteKaoHeAll:function(){var e=this,t={unitId:this.unitId,year:this.query.year};this.exportLoading=!0,Object(i.d)(t).then(function(t){e.$message.success("删除成功"),e.init()}).catch(function(t){e.loading=!1,console.log(t)}),this.deleteDialogVisible=!1},handleCellMouse:function(e,t,a){this.editTable.store.setCellStates([e],[t.property],{cellHovering:"enter"===a})},handleCancelCell:function(e,t){this.editTable.cancelCells([e],[t])},handleSaveCell:function(e,t,a){var n=this;e(function(e){e?(Object(i.f)(t).then(function(e){n.$message.success("保存成功")}).catch(function(e){n.loading=!1,console.log(e)}),n.editTable.cancelCells([t],[a],!1)):n.$message.error("校验不通过")})},handleCheckData:function(){console.log(this.tableData)}},created:function(){this.init()}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticStyle:{"margin-left":"0px"},attrs:{title:"批量添加考核",visible:e.dialogAddAssessmentVisible,"append-to-body":"",width:"80%"},on:{"update:visible":function(t){e.dialogAddAssessmentVisible=t}}},[a("div",{staticClass:"head-container",staticStyle:{"padding-top":"10px"}},[a("el-input",{staticClass:"filter-item",staticStyle:{width:"10%"},attrs:{clearable:"",placeholder:"姓名或简名"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.toQuery(t)}},model:{value:e.query.name,callback:function(t){e.$set(e.query,"name",t)},expression:"query.name"}}),e._v(" "),a("el-select",{staticClass:"filter-item",staticStyle:{width:"10%"},attrs:{clearable:"",placeholder:"考核年限"},on:{change:e.toQuery},model:{value:e.query.year,callback:function(t){e.$set(e.query,"year",t)},expression:"query.year"}},e._l(e.years,function(e){return a("el-option",{key:e.key,attrs:{label:e.display_name,value:e.key}})}),1),e._v(" "),a("el-button",{staticClass:"filter-item",attrs:{size:"mini",type:"success",icon:"el-icon-search"},on:{click:e.toQuery}},[e._v("搜索\n    ")]),e._v(" "),a("div",{staticStyle:{display:"inline-block",margin:"0px 2px"}},[a("el-button",{staticClass:"filter-item",attrs:{size:"mini",type:"primary",icon:"el-icon-plus"},on:{click:e.addKaoHe}},[e._v("批量添加")])],1),e._v(" "),a("div",{staticStyle:{display:"inline-block",margin:"0px 2px"}},[a("el-button",{staticClass:"filter-item",attrs:{size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:e.deleteKaoHe}},[e._v("批量删除")])],1)],1),e._v(" "),a("el-table-editabled",{ref:"editTable",attrs:{columns:["name","name1","name2"],cellStates:e.cellStates,validators:e.validators,"validate-msg-tooltip":""},model:{value:e.data,callback:function(t){e.data=t},expression:"data"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"loading-area",staticStyle:{width:"100%"},attrs:{data:e.data,size:"small","cell-style":{padding:"0px"},"element-loading-spinner":"el-icon-loading","header-cell-style":{"text-align":"center",background:"#ADD8E6",color:"#030303"},"element-loading-text":"请稍后","row-key":"id","highlight-current-row":""},on:{"cell-mouse-enter":function(t,a){return e.handleCellMouse(t,a,"enter")},"cell-mouse-leave":function(t,a){return e.handleCellMouse(t,a,"leave")},"selection-change":function(t){e.selection=arguments[0]}}},[a("el-table-column",{attrs:{property:"peopleName",label:"姓名"}}),e._v(" "),e._e(),e._v(" "),a("el-table-column",{attrs:{property:"name",label:"考核结果"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("el-table-editabled-cell",{attrs:{row:n,prop:"name"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.ownStates,l=t.validateOwn;return[a("div",{staticClass:"cell-edit-wrapper"},[a("div",{staticClass:"cell-content"},[a("span",{directives:[{name:"show",rawName:"v-show",value:!i.editing,expression:"!ownStates.editing"}]},[e._v(e._s(n.name))]),e._v(" "),a("el-select",{directives:[{name:"show",rawName:"v-show",value:i.editing,expression:"ownStates.editing"}],staticClass:"filter-item",attrs:{placeholder:"考核结果"},on:{input:l},model:{value:n.name,callback:function(t){e.$set(n,"name",t)},expression:"row.name"}},e._l(e.names,function(e){return a("el-option",{key:e.key,attrs:{label:e.display_name,value:e.key}})}),1)],1),e._v(" "),a("div",{staticClass:"cell-edit-controller"},[a("i",{directives:[{name:"show",rawName:"v-show",value:i.cellHovering&&!i.editing,expression:"ownStates.cellHovering && !ownStates.editing"}],staticClass:"el-icon-edit",on:{click:function(){return i.editing=!0}}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:i.editing,expression:"ownStates.editing"}]},[a("i",{staticClass:"el-icon-check",on:{click:function(t){return e.handleSaveCell(l,n,"name")}}}),e._v(" "),a("i",{staticClass:"el-icon-close",on:{click:function(t){return e.handleCancelCell(n,"name")}}})])])])]}}],null,!0)})]}}])}),e._v(" "),a("el-table-column",{attrs:{property:"peopleName1",label:"姓名"}}),e._v(" "),e._e(),e._v(" "),a("el-table-column",{attrs:{prop:"name1",label:"考核结果"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("el-table-editabled-cell",{attrs:{row:n,prop:"name1"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.ownStates,l=t.validateOwn;return[a("div",{staticClass:"cell-edit-wrapper"},[a("div",{staticClass:"cell-content"},[a("span",{directives:[{name:"show",rawName:"v-show",value:!i.editing,expression:"!ownStates.editing"}]},[e._v(e._s(n.name1))]),e._v(" "),a("el-select",{directives:[{name:"show",rawName:"v-show",value:i.editing,expression:"ownStates.editing"}],staticClass:"filter-item",attrs:{placeholder:"考核结果"},on:{input:l},model:{value:n.name1,callback:function(t){e.$set(n,"name1",t)},expression:"row.name1"}},e._l(e.names,function(e){return a("el-option",{key:e.key,attrs:{label:e.display_name,value:e.key}})}),1)],1),e._v(" "),a("div",{staticClass:"cell-edit-controller"},[a("i",{directives:[{name:"show",rawName:"v-show",value:i.cellHovering&&!i.editing,expression:"ownStates.cellHovering && !ownStates.editing"}],staticClass:"el-icon-edit",on:{click:function(){return i.editing=!0}}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:i.editing,expression:"ownStates.editing"}]},[a("i",{staticClass:"el-icon-check",on:{click:function(t){return e.handleSaveCell(l,n,"name1")}}}),e._v(" "),a("i",{staticClass:"el-icon-close",on:{click:function(t){return e.handleCancelCell(n,"name1")}}})])])])]}}],null,!0)})]}}])}),e._v(" "),a("el-table-column",{attrs:{property:"peopleName2",label:"姓名"}}),e._v(" "),e._e(),e._v(" "),a("el-table-column",{attrs:{prop:"name2",label:"考核结果"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("el-table-editabled-cell",{attrs:{row:n,prop:"name2"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.ownStates,l=t.validateOwn;return[a("div",{staticClass:"cell-edit-wrapper"},[a("div",{staticClass:"cell-content"},[a("span",{directives:[{name:"show",rawName:"v-show",value:!i.editing,expression:"!ownStates.editing"}]},[e._v(e._s(n.name2))]),e._v(" "),a("el-select",{directives:[{name:"show",rawName:"v-show",value:i.editing,expression:"ownStates.editing"}],staticClass:"filter-item",attrs:{placeholder:"考核结果"},on:{input:l},model:{value:n.name2,callback:function(t){e.$set(n,"name2",t)},expression:"row.name2"}},e._l(e.names,function(e){return a("el-option",{key:e.key,attrs:{label:e.display_name,value:e.key}})}),1)],1),e._v(" "),a("div",{staticClass:"cell-edit-controller"},[a("i",{directives:[{name:"show",rawName:"v-show",value:i.cellHovering&&!i.editing,expression:"ownStates.cellHovering && !ownStates.editing"}],staticClass:"el-icon-edit",on:{click:function(){return i.editing=!0}}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:i.editing,expression:"ownStates.editing"}]},[a("i",{staticClass:"el-icon-check",on:{click:function(t){return e.handleSaveCell(l,n,"name2")}}}),e._v(" "),a("i",{staticClass:"el-icon-close",on:{click:function(t){return e.handleCancelCell(n,"name2")}}})])])])]}}],null,!0)})]}}])})],1)],1),e._v(" "),a("el-pagination",{staticStyle:{"margin-top":"2px",float:"right"},attrs:{total:e.total,"current-page":e.page+1,layout:"total, prev, pager, next, jumper, sizes"},on:{"size-change":e.sizeChange,"current-change":e.pageChange}}),e._v(" "),a("div",{staticClass:"dialog-footer",staticStyle:{"padding-right":"5px"},attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"text"},on:{click:function(t){e.dialogAddAssessmentVisible=!1}}},[e._v("关闭")])],1),e._v(" "),a("el-dialog",{attrs:{title:"提示","append-to-body":!0,visible:e.addDialogVisible,width:"30%",center:""},on:{"update:visible":function(t){e.addDialogVisible=t}}},[a("span",[e._v("确定要批量添加人员考核！")]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",loading:e.exportLoading},on:{click:e.addKaoHeAll}},[e._v("确 定")]),e._v(" "),a("el-button",{on:{click:function(t){e.addDialogVisible=!1}}},[e._v("取 消")])],1)]),e._v(" "),a("el-dialog",{attrs:{title:"提示","append-to-body":!0,visible:e.deleteDialogVisible,width:"30%",center:""},on:{"update:visible":function(t){e.deleteDialogVisible=t}}},[a("span",[e._v("确定要批量删除人员考核！")]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",loading:e.exportLoading},on:{click:e.deleteKaoHeAll}},[e._v("确 定")]),e._v(" "),a("el-button",{on:{click:function(t){e.deleteDialogVisible=!1}}},[e._v("取 消")])],1)])],1)},staticRenderFns:[]};var o=a("VU/8")(l,s,!1,function(e){a("Mcp2")},"data-v-1cbc008c",null);t.default=o.exports}});