webpackJsonp([14],{"9tIb":function(t,e){},cl73:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("Foau"),o=i("R2SV"),l=i("Ks07"),n=i("Lf8l"),r=i("gN++"),s=i("5j4I"),c={name:"index",mixins:[l.a],components:{progressNum:n.default,progressReg:s.default},data:function(){return{data:[],rowid:"",exportLoading:!1,rejectDialogVisible:!1,agreeDialogVisible:!1,againDialogVisible:!1,revokeDialogVisible:!1,hasChild:!1,notAdmin:!1,admin:!1,approveFlags:[{key:"all",display_name:"全部"},{key:"0",display_name:"备案表"},{key:"1",display_name:"职数表"}],statess:[{key:"all",display_name:"全部"},{key:"已审核",display_name:"已审核"},{key:"未审批",display_name:"未审批"},{key:"已驳回",display_name:"已驳回"}],query:{name:"",approveFlag:"",states:"未审批"},detail:0}},created:function(){var t=this;this.sqlVisible(),this.$nextTick(function(){t.init()})},methods:{againImportDataDialog:function(t){this.againDialogVisible=!0,this.rowid=t.id},agreeImportDataDialog:function(t){this.agreeDialogVisible=!0,this.rowid=t.id},rejectImportDataDialog:function(t){this.rejectDialogVisible=!0,this.rowid=t.id},revokeImportDataDialog:function(t){this.revokeDialogVisible=!0,this.rowid=t.id},rejectImportData:function(){var t=this,e={rowid:this.rowid,flag:"驳回"};this.exportLoading=!0,Object(a.l)(e).then(function(e){t.rejectDialogVisible=!1,t.exportLoading=!1,t.$notify({title:"驳回成功！",type:"success",duration:2500}),t.query.states="已驳回",t.init()}).catch(function(e){t.exportLoading=!1,console.log(e.response.msg)})},agreeImportData:function(){var t=this,e={rowid:this.rowid,flag:"审核"};this.exportLoading=!0,Object(a.l)(e).then(function(e){t.agreeDialogVisible=!1,t.exportLoading=!1,t.$notify({title:"审核成功！",type:"success",duration:2500}),t.query.states="已审核",t.init()}).catch(function(e){t.exportLoading=!1,console.log(e.response.msg)})},againImportData:function(){var t=this,e={rowid:this.rowid,flag:"复审"};this.exportLoading=!0,Object(a.l)(e).then(function(e){t.againDialogVisible=!1,t.exportLoading=!1,t.$notify({title:"审核成功！",type:"success",duration:2500}),t.query.states="已审核",t.init()}).catch(function(e){t.exportLoading=!1,console.log(e.response.msg)})},revokeImportData:function(){var t=this,e={rowid:this.rowid,flag:"撤销"};this.exportLoading=!0,Object(a.l)(e).then(function(e){t.revokeDialogVisible=!1,t.exportLoading=!1,t.$notify({title:"驳回成功！",type:"success",duration:2500}),t.query.states="已驳回",t.init()}).catch(function(e){t.exportLoading=!1,console.log(e.response.msg)})},sqlVisible:function(){var t=this,e=this.$route.query.params;this.query.states="1"===e?"已审核":"2"===e?"已驳回":"未审批";Object(r.l)({enabled:"0"}).then(function(e){"1"===e.result[0].hasChild?t.hasChild=!0:t.hasChild=!1,"1"===e.ext.roles?t.admin=!0:t.notAdmin=!0})},beforeInit:function(){this.url="api/data/process";var t=this.query,e=t.name,i=t.approveFlag,a=t.states;return this.params={page:this.page,size:this.size,unitName:e,approveFlag:i,states:a},!0},getRowClass:function(t){t.row,t.column,t.rowIndex,t.columnIndex},rowClick:function(t,e,i){this.rowid=t.id,"职级职数使用审批表"===t.processFlag?this.detail=1:this.detail=2},formatter:function(t,e,i,a){if(null!=t[e.property])return Object(o.a)(t[e.property])}}},p={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"head-container",staticStyle:{"padding-top":"10px"}},[i("el-input",{staticClass:"filter-item",staticStyle:{width:"10%"},attrs:{clearable:"",placeholder:"单位名称"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.toQuery(e)}},model:{value:t.query.name,callback:function(e){t.$set(t.query,"name",e)},expression:"query.name"}}),t._v(" "),i("el-select",{staticClass:"filter-item",staticStyle:{width:"10%"},attrs:{clearable:"",placeholder:"审批表类型"},on:{change:t.toQuery},model:{value:t.query.approveFlag,callback:function(e){t.$set(t.query,"approveFlag",e)},expression:"query.approveFlag"}},t._l(t.approveFlags,function(t){return i("el-option",{key:t.key,attrs:{label:t.display_name,value:t.key}})}),1),t._v(" "),i("el-select",{staticClass:"filter-item",staticStyle:{width:"10%"},attrs:{clearable:"",placeholder:"状态"},on:{change:t.toQuery},model:{value:t.query.states,callback:function(e){t.$set(t.query,"states",e)},expression:"query.states"}},t._l(t.statess,function(t){return i("el-option",{key:t.key,attrs:{label:t.display_name,value:t.key}})}),1),t._v(" "),i("el-button",{staticClass:"filter-item",attrs:{size:"mini",type:"success",icon:"el-icon-search"},on:{click:t.toQuery}},[t._v("搜索")])],1),t._v(" "),i("div",[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%","font-size":"10px"},attrs:{"row-style":t.getRowClass,"header-row-style":t.getRowClass,"header-cell-style":{"text-align":"center",background:"#ADD8E6",color:"#030303"},"cell-style":{padding:"0px"},data:t.data,size:"small","row-key":"id","element-loading-text":"请稍后","default-expand-all":"","highlight-current-row":"","element-loading-spinner":"el-icon-loading",border:""},on:{"row-click":t.rowClick}},[i("el-table-column",{attrs:{type:"index",label:"序号",width:"60"}}),t._v(" "),i("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"unitName",label:"单位名称"}}),t._v(" "),i("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"processFlag",label:"审批表类型"}}),t._v(" "),i("el-table-column",{attrs:{sortable:"","show-overflow-tooltip":!0,width:"110px",formatter:t.formatter,prop:"createTime",label:"创建日期"}}),t._v(" "),i("el-table-column",{attrs:{sortable:"","show-overflow-tooltip":!0,width:"110px",formatter:t.formatter,prop:"processTime",label:"审批日期"}}),t._v(" "),i("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"people",label:"审批单位/人"}}),t._v(" "),i("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"states",label:"状态",width:"90px"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-tag",{attrs:{type:"已审核"===e.row.states?"success":"danger"}},[t._v(t._s(e.row.states))])]}}])}),t._v(" "),i("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"tag",fixed:"right",label:"操作",width:"190px",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return["未审批"==e.row.states&&(t.admin||t.hasChild)?i("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-check"},on:{click:function(i){return t.agreeImportDataDialog(e.row)}}},[t._v("同意")]):t._e(),t._v(" "),"未审批"==e.row.states?i("el-button",{attrs:{size:"mini",type:"info",icon:"el-icon-circle-close"},on:{click:function(i){return t.revokeImportDataDialog(e.row)}}},[t._v("撤销")]):t._e(),t._v(" "),"已驳回"==e.row.states&&(t.admin||t.hasChild)?i("el-button",{attrs:{size:"mini",type:"warning",icon:"el-icon-check"},on:{click:function(i){return t.againImportDataDialog(e.row)}}},[t._v("审核")]):t._e(),t._v(" "),"已审核"==e.row.states&&(t.admin||t.hasChild)?i("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-eleme"},on:{click:function(i){return t.rejectImportDataDialog(e.row)}}},[t._v("驳回")]):t._e()]}}])})],1),t._v(" "),i("el-pagination",{staticStyle:{"margin-top":"2px",float:"right"},attrs:{total:t.total,"current-page":t.page+1,layout:"total, prev, pager, next, jumper, sizes"},on:{"size-change":t.sizeChange,"current-change":t.pageChange}})],1),t._v(" "),i("div",{staticStyle:{"margin-top":"30px"}},[1==t.detail?i("progress-num",{ref:"progressNum",attrs:{rowid:t.rowid}}):t._e(),t._v(" "),2==t.detail?i("progress-reg",{ref:"progressReg",attrs:{rowid:t.rowid}}):t._e()],1),t._v(" "),i("div",[i("el-dialog",{attrs:{title:"提示","append-to-body":!0,visible:t.rejectDialogVisible,width:"30%",center:""},on:{"update:visible":function(e){t.rejectDialogVisible=e}}},[i("span",[t._v("确定要驳回此次审批么！")]),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary",loading:t.exportLoading},on:{click:t.rejectImportData}},[t._v("确 定")]),t._v(" "),i("el-button",{on:{click:function(e){t.rejectDialogVisible=!1}}},[t._v("取 消")])],1)]),t._v(" "),i("el-dialog",{attrs:{title:"提示","append-to-body":!0,visible:t.agreeDialogVisible,width:"30%",center:""},on:{"update:visible":function(e){t.agreeDialogVisible=e}}},[i("span",[t._v("确定要审批此条审批数据么！")]),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary",loading:t.exportLoading},on:{click:t.agreeImportData}},[t._v("确 定")]),t._v(" "),i("el-button",{on:{click:function(e){t.agreeDialogVisible=!1}}},[t._v("取 消")])],1)]),t._v(" "),i("el-dialog",{attrs:{title:"提示","append-to-body":!0,visible:t.againDialogVisible,width:"30%",center:""},on:{"update:visible":function(e){t.againDialogVisible=e}}},[i("span",[t._v("确定要再次审批此条么！")]),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary",loading:t.exportLoading},on:{click:t.againImportData}},[t._v("确 定")]),t._v(" "),i("el-button",{on:{click:function(e){t.againDialogVisible=!1}}},[t._v("取 消")])],1)]),t._v(" "),i("el-dialog",{attrs:{title:"提示","append-to-body":!0,visible:t.revokeDialogVisible,width:"30%",center:""},on:{"update:visible":function(e){t.revokeDialogVisible=e}}},[i("span",[t._v("确定要撤销此流程！")]),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary",loading:t.exportLoading},on:{click:t.revokeImportData}},[t._v("确 定")]),t._v(" "),i("el-button",{on:{click:function(e){t.revokeDialogVisible=!1}}},[t._v("取 消")])],1)])],1)])},staticRenderFns:[]};var d=i("VU/8")(c,p,!1,function(t){i("9tIb")},"data-v-7a065734",null);e.default=d.exports}});