webpackJsonp([43],{JBEL:function(t,e){},UaN4:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("Ks07"),o=i("vMJZ"),l={mixins:[a.a],data:function(){return{messageDialog:!1,data:[],loading:!1,delLoading:!1,disable:!1,isAdd:!1,fdicts:[{value:"0",label:"启用"},{value:"1",label:"关闭"}],dicts:[{key:"0",display_name:"启用"},{key:"1",display_name:"关闭"}],dialog:!1,form:{name:"",param:"",states:"0",orderNum:0}}},created:function(){var t=this;this.$nextTick(function(){t.init()})},methods:{winCancel:function(){this.dialog=!1},doSubmit:function(){var t=this;this.$refs.form.validate(function(e){e&&(t.loading=!0,t.isAdd?t.doAdd():t.doEdit())})},cancel:function(){this.messageDialog=!1},add:function(){this.isAdd=!0,this.form={states:"0",orderNum:1},this.disable=!0,this.dialog=!0},doAdd:function(){var t=this;Object(o.b)(this.form).then(function(e){t.resetForm(),t.$notify({title:"添加成功",type:"success",duration:2500}),t.loading=!1,t.init()}).catch(function(e){t.loading=!1,console.log(e.response.data.message)})},doEdit:function(){var t=this;Object(o.f)(this.form).then(function(e){t.resetForm(),t.$notify({title:"修改成功",type:"success",duration:2500}),t.loading=!1,t.init()}).catch(function(e){t.loading=!1,console.log(e.response.data.message)})},edit:function(t){this.isAdd=!1,this.form={id:t.id,name:t.name,param:t.param,states:t.states,orderNum:t.orderNum},this.disable=!1,this.dialog=!0},resetForm:function(){this.dialog=!1,this.$refs.form.resetFields(),this.form={name:"",states:"0",orderNum:0}},subDelete:function(t){var e=this;this.delLoading=!0;var i={id:t};Object(o.d)(i).then(function(i){e.delLoading=!1,e.$refs[t].doClose(),e.init(),e.$notify({title:"删除成功",type:"success",duration:2500})}).catch(function(i){e.delLoading=!1,e.$refs[t].doClose(),console.log(i.response.data.message)})},getRowClass:function(t){t.row,t.column,t.rowIndex,t.columnIndex},beforeInit:function(){return this.url="api/user/message",this.params={page:this.page,size:this.size},!0}}},n={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-dialog",{attrs:{visible:t.messageDialog,title:"轮播消息","append-to-body":"",width:"80%"},on:{"update:visible":function(e){t.messageDialog=e}}},[i("div",[i("div",{staticStyle:{display:"inline-block",margin:"0px 2px"}},[i("el-button",{staticClass:"filter-item",attrs:{size:"mini",type:"primary",icon:"el-icon-plus"},on:{click:t.add}},[t._v("新增")])],1),t._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%","font-size":"10px"},attrs:{"row-style":t.getRowClass,"header-row-style":t.getRowClass,"header-cell-style":{"text-align":"center",background:"#ADD8E6",color:"#030303"},"cell-style":{padding:"0px"},data:t.data,size:"small","row-key":"id","element-loading-text":"请稍后","highlight-current-row":"","element-loading-spinner":"el-icon-loading",border:""}},[i("el-table-column",{attrs:{width:"50",prop:"orderNum",label:"序号"}}),t._v(" "),i("el-table-column",{attrs:{label:"标题",prop:"name",width:"200px"}}),t._v(" "),i("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"param",label:"消息"}}),t._v(" "),i("el-table-column",{attrs:{label:"状态",width:"80px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(t.dicts,function(a){return i("div",{key:a.key},[e.row.states.toString()===a.key?i("el-tag",{attrs:{type:e.row.states?"":"info"}},[t._v(t._s(a.display_name))]):t._e()],1)})}}])}),t._v(" "),i("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"tag",fixed:"right",label:"操作",width:"130px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-edit"},on:{click:function(i){return t.edit(e.row)}}}),t._v(" "),i("el-popover",{ref:e.row.id,attrs:{placement:"top",width:"180"}},[i("p",[t._v("确定删除本条数据吗？")]),t._v(" "),i("div",{staticStyle:{"text-align":"right",margin:"0"}},[i("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(i){t.$refs[e.row.id].doClose()}}},[t._v("取消")]),t._v(" "),i("el-button",{attrs:{loading:t.delLoading,type:"primary",size:"mini"},on:{click:function(i){return t.subDelete(e.row.id)}}},[t._v("确定")])],1),t._v(" "),i("el-button",{attrs:{slot:"reference",disabled:1===e.row.id,type:"danger",icon:"el-icon-delete",size:"mini"},slot:"reference"})],1)]}}])})],1),t._v(" "),i("el-pagination",{staticStyle:{"margin-top":"2px",float:"right"},attrs:{total:t.total,"current-page":t.page+1,layout:"total, prev, pager, next, jumper, sizes"},on:{"size-change":t.sizeChange,"current-change":t.pageChange}})],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:t.cancel}},[t._v("取消")])],1)]),t._v(" "),i("el-dialog",{attrs:{visible:t.dialog,title:t.isAdd?"新增消息":"编辑消息","append-to-body":"",width:"570px"},on:{"update:visible":function(e){t.dialog=e}}},[i("el-form",{ref:"form",attrs:{inline:!0,model:t.form,size:"small","label-width":"88px"}},[i("el-form-item",{attrs:{label:"标题",prop:"name"}},[i("el-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"序号",prop:"orderNum"}},[i("el-input",{attrs:{type:"number",disabled:t.disable},model:{value:t.form.orderNum,callback:function(e){t.$set(t.form,"orderNum",e)},expression:"form.orderNum"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"消息",prop:"param"}},[i("el-input",{staticStyle:{width:"400px"},attrs:{type:"textarea",autosize:"",placeholder:"请输入内容",maxlength:"130","show-word-limit":""},model:{value:t.form.param,callback:function(e){t.$set(t.form,"param",e)},expression:"form.param"}})],1),t._v(" "),i("br"),t._v(" "),i("el-form-item",{attrs:{label:"状态",prop:"states"}},t._l(t.fdicts,function(e){return i("el-radio",{key:e.value,attrs:{label:e.value},model:{value:t.form.states,callback:function(e){t.$set(t.form,"states",e)},expression:"form.states"}},[t._v(t._s(e.label))])}),1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"text"},on:{click:t.winCancel}},[t._v("取消")]),t._v(" "),i("el-button",{attrs:{loading:t.loading,type:"primary"},on:{click:t.doSubmit}},[t._v("确认")])],1)],1)],1)},staticRenderFns:[]};var s=i("VU/8")(l,n,!1,function(t){i("JBEL")},"data-v-41542445",null);e.default=s.exports}});